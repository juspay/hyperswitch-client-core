let assetUrl = `https://maven.hyperswitch.io/release/production/icons/1.0.0/error.svg`
let card = `<svg class="p-Icon p-Icon--card Icon p-Icon--md p-TabIcon TabIcon p-TabIcon--selected TabIcon--selected" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 4a2 2 0 012-2h12a2 2 0 012 2H0zm0 2v6a2 2 0 002 2h12a2 2 0 002-2V6H0zm3 5a1 1 0 011-1h1a1 1 0 110 2H4a1 1 0 01-1-1z"></path></svg>`
let cardv1 = `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.5 3.75H2.5C2.16848 3.75 1.85054 3.8817 1.61612 4.11612C1.3817 4.35054 1.25 4.66848 1.25 5V15C1.25 15.3315 1.3817 15.6495 1.61612 15.8839C1.85054 16.1183 2.16848 16.25 2.5 16.25H17.5C17.8315 16.25 18.1495 16.1183 18.3839 15.8839C18.6183 15.6495 18.75 15.3315 18.75 15V5C18.75 4.66848 18.6183 4.35054 18.3839 4.11612C18.1495 3.8817 17.8315 3.75 17.5 3.75ZM17.5 5V6.875H2.5V5H17.5ZM17.5 15H2.5V8.125H17.5V15ZM16.25 13.125C16.25 13.2908 16.1842 13.4497 16.0669 13.5669C15.9497 13.6842 15.7908 13.75 15.625 13.75H13.125C12.9592 13.75 12.8003 13.6842 12.6831 13.5669C12.5658 13.4497 12.5 13.2908 12.5 13.125C12.5 12.9592 12.5658 12.8003 12.6831 12.6831C12.8003 12.5658 12.9592 12.5 13.125 12.5H15.625C15.7908 12.5 15.9497 12.5658 16.0669 12.6831C16.1842 12.8003 16.25 12.9592 16.25 13.125ZM11.25 13.125C11.25 13.2908 11.1842 13.4497 11.0669 13.5669C10.9497 13.6842 10.7908 13.75 10.625 13.75H9.375C9.20924 13.75 9.05027 13.6842 8.93306 13.5669C8.81585 13.4497 8.75 13.2908 8.75 13.125C8.75 12.9592 8.81585 12.8003 8.93306 12.6831C9.05027 12.5658 9.20924 12.5 9.375 12.5H10.625C10.7908 12.5 10.9497 12.5658 11.0669 12.6831C11.1842 12.8003 11.25 12.9592 11.25 13.125Z" fill="#006DF9"/></svg>`
let close = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M13.7429 2.27713C13.3877 1.92197 12.8117 1.92197 12.4618 2.27713L8.01009 6.71659L3.55299 2.26637C3.19771 1.91121 2.62173 1.91121 2.27184 2.26637C1.91656 2.62152 1.91656 3.19731 2.27184 3.54709L6.72356 7.99731L2.26646 12.4529C1.91118 12.8081 1.91118 13.3839 2.26646 13.7336C2.62173 14.0888 3.19771 14.0888 3.5476 13.7336L7.99932 9.28341L12.451 13.7336C12.8063 14.0888 13.3823 14.0888 13.7322 13.7336C14.0875 13.3785 14.0875 12.8027 13.7322 12.4529L9.28047 8.00269L13.7322 3.55247C14.0875 3.20807 14.0875 2.62152 13.7429 2.27713Z" fill="#8D8D8D"/></svg>`
let cvvempty = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M5 6C3.89543 6 3 6.89543 3 8V8.37275H21V8C21 6.89543 20.1046 6 19 6H5ZM21 11.0728H3V16.2727C3 17.3773 3.89543 18.2727 5 18.2727H19C20.1046 18.2727 21 17.3773 21 16.2727V11.0728ZM4.15385 15.4616C4.15385 15.3341 4.25717 15.2308 4.38462 15.2308H7.15385C7.2813 15.2308 7.38462 15.3341 7.38462 15.4616C7.38462 15.589 7.2813 15.6923 7.15385 15.6923H4.38462C4.25717 15.6923 4.15385 15.589 4.15385 15.4616ZM4.38462 16.1538C4.25717 16.1538 4.15385 16.2571 4.15385 16.3846C4.15385 16.512 4.25717 16.6154 4.38462 16.6154H9.92308C10.0505 16.6154 10.1538 16.512 10.1538 16.3846C10.1538 16.2571 10.0505 16.1538 9.92308 16.1538H4.38462Z" fill="#979797"/><circle cx="17.0769" cy="12" r="2.76923" fill="#858F97"/><path d="M15.6248 11.3891V12.8914H15.9278V11.1086H15.2308V11.3891H15.6248Z" fill="white"/><path d="M17.4904 12.8889V12.5987H16.7416L17.0667 12.3231C17.3401 12.0914 17.4781 11.9036 17.4781 11.6549C17.4781 11.294 17.2391 11.0769 16.8549 11.0769C16.4732 11.0769 16.222 11.3305 16.2195 11.7207H16.5323C16.5347 11.4915 16.6579 11.3549 16.8549 11.3549C17.0446 11.3549 17.1554 11.4695 17.1554 11.672C17.1554 11.8427 17.0741 11.9597 16.8303 12.1646L16.2417 12.6572V12.8914L17.4904 12.8889Z" fill="white"/><path d="M18.2335 12.0085C18.4847 12.0085 18.6029 12.1402 18.6029 12.3207C18.6029 12.5182 18.4724 12.645 18.2753 12.645C18.0832 12.645 17.9551 12.528 17.9551 12.3231H17.6448C17.6448 12.7084 17.9182 12.9231 18.2704 12.9231C18.6349 12.9231 18.9231 12.6914 18.9231 12.3256C18.9231 12.011 18.7088 11.811 18.4329 11.7573L18.8714 11.3574V11.1086H17.7285V11.3842H18.4773L18.0142 11.8061V12.0085H18.2335Z" fill="white"/></svg>`
let cvvfilled = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M5 6C3.89543 6 3 6.89543 3 8V8.37275H21V8C21 6.89543 20.1046 6 19 6H5ZM21 11.0728H3V16.2727C3 17.3773 3.89543 18.2727 5 18.2727H19C20.1046 18.2727 21 17.3773 21 16.2727V11.0728ZM4.15385 15.4616C4.15385 15.3341 4.25717 15.2308 4.38462 15.2308H7.15385C7.2813 15.2308 7.38462 15.3341 7.38462 15.4616C7.38462 15.589 7.2813 15.6923 7.15385 15.6923H4.38462C4.25717 15.6923 4.15385 15.589 4.15385 15.4616ZM4.38462 16.1538C4.25717 16.1538 4.15385 16.2571 4.15385 16.3846C4.15385 16.512 4.25717 16.6154 4.38462 16.6154H9.92308C10.0505 16.6154 10.1538 16.512 10.1538 16.3846C10.1538 16.2571 10.0505 16.1538 9.92308 16.1538H4.38462Z" fill="#979797"/><circle cx="17.0769" cy="12" r="2.76923" fill="#006DF9"/><path d="M15.6248 11.3891V12.8914H15.9278V11.1086H15.2308V11.3891H15.6248Z" fill="white"/><path d="M17.4904 12.8889V12.5987H16.7416L17.0667 12.3231C17.3401 12.0914 17.4781 11.9036 17.4781 11.6549C17.4781 11.294 17.2391 11.0769 16.8549 11.0769C16.4732 11.0769 16.2219 11.3305 16.2195 11.7207H16.5323C16.5347 11.4915 16.6579 11.3549 16.8549 11.3549C17.0446 11.3549 17.1554 11.4695 17.1554 11.672C17.1554 11.8427 17.0741 11.9597 16.8303 12.1646L16.2417 12.6572V12.8914L17.4904 12.8889Z" fill="white"/><path d="M18.2334 12.0085C18.4847 12.0085 18.6029 12.1402 18.6029 12.3207C18.6029 12.5182 18.4724 12.645 18.2753 12.645C18.0832 12.645 17.9551 12.528 17.9551 12.3231H17.6448C17.6448 12.7084 17.9182 12.9231 18.2704 12.9231C18.6349 12.9231 18.9231 12.6914 18.9231 12.3256C18.9231 12.011 18.7088 11.811 18.4329 11.7573L18.8714 11.3574V11.1086H17.7285V11.3842H18.4773L18.0142 11.8061V12.0085H18.2334Z" fill="white"/></svg>`
let error = `<?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 115.19 123.38" style="enable-background:new 0 0 115.19 123.38" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;stroke:#000000;stroke-width:0.5;stroke-miterlimit:2.6131;}</style><g><path class="st0" d="M93.13,79.5c12.05,0,21.82,9.77,21.82,21.82c0,12.05-9.77,21.82-21.82,21.82c-12.05,0-21.82-9.77-21.82-21.82 C71.31,89.27,81.08,79.5,93.13,79.5L93.13,79.5z M8.08,0.25h95.28c2.17,0,4.11,0.89,5.53,2.3c1.42,1.42,2.3,3.39,2.3,5.53v70.01 c-2.46-1.91-5.24-3.44-8.25-4.48V9.98c0-0.43-0.16-0.79-0.46-1.05c-0.26-0.26-0.66-0.46-1.05-0.46H9.94 c-0.43,0-0.79,0.16-1.05,0.46C8.63,9.19,8.43,9.58,8.43,9.98v70.02h0.03l31.97-30.61c1.28-1.18,3.29-1.05,4.44,0.23 c0.03,0.03,0.03,0.07,0.07,0.07l26.88,31.8c-4.73,5.18-7.62,12.08-7.62,19.65c0,3.29,0.55,6.45,1.55,9.4H8.08 c-2.17,0-4.11-0.89-5.53-2.3s-2.3-3.39-2.3-5.53V8.08c0-2.17,0.89-4.11,2.3-5.53S5.94,0.25,8.08,0.25L8.08,0.25z M73.98,79.35 l3.71-22.79c0.3-1.71,1.91-2.9,3.62-2.6c0.66,0.1,1.25,0.43,1.71,0.86l17.1,17.97c-2.18-0.52-4.44-0.79-6.78-0.79 C85.91,71.99,79.13,74.77,73.98,79.35L73.98,79.35z M81.98,18.19c3.13,0,5.99,1.28,8.03,3.32c2.07,2.07,3.32,4.9,3.32,8.03 c0,3.13-1.28,5.99-3.32,8.03c-2.07,2.07-4.9,3.32-8.03,3.32c-3.13,0-5.99-1.28-8.03-3.32c-2.07-2.07-3.32-4.9-3.32-8.03 c0-3.13,1.28-5.99,3.32-8.03C76.02,19.44,78.86,18.19,81.98,18.19L81.98,18.19z M85.82,88.05l19.96,21.6 c1.58-2.39,2.5-5.25,2.5-8.33c0-8.36-6.78-15.14-15.14-15.14C90.48,86.17,87.99,86.85,85.82,88.05L85.82,88.05z M100.44,114.58 l-19.96-21.6c-1.58,2.39-2.5,5.25-2.5,8.33c0,8.36,6.78,15.14,15.14,15.14C95.78,116.46,98.27,115.78,100.44,114.58L100.44,114.58z"/></g></svg>`
let lock = `<svg xmlns="http://www.w3.org/2000/svg" width="8" height="11" viewBox="0 0 8 11" fill="none"><path d="M1 10.5566C0.725 10.5566 0.489666 10.4588 0.294 10.2631C0.0983332 10.0675 0.000333333 9.83197 0 9.55664V4.55664C0 4.28164 0.0979999 4.04631 0.294 3.85064C0.49 3.65497 0.725333 3.55697 1 3.55664H1.5V2.55664C1.5 1.86497 1.74383 1.27547 2.2315 0.788141C2.71917 0.300807 3.30867 0.056974 4 0.0566406C4.69167 0.0566406 5.28133 0.300474 5.769 0.788141C6.25666 1.27581 6.50033 1.86531 6.5 2.55664V3.55664H7C7.275 3.55664 7.5105 3.65464 7.7065 3.85064C7.9025 4.04664 8.00033 4.28197 8 4.55664V9.55664C8 9.83164 7.90216 10.0671 7.7065 10.2631C7.51083 10.4591 7.27533 10.557 7 10.5566H1ZM1 9.55664H7V4.55664H1V9.55664ZM4 8.05664C4.275 8.05664 4.5105 7.95881 4.7065 7.76314C4.9025 7.56747 5.00033 7.33197 5 7.05664C5 6.78164 4.90217 6.54631 4.7065 6.35064C4.51083 6.15497 4.27533 6.05697 4 6.05664C3.725 6.05664 3.48967 6.15464 3.294 6.35064C3.09833 6.54664 3.00033 6.78197 3 7.05664C3 7.33164 3.098 7.56714 3.294 7.76314C3.49 7.95914 3.72533 8.05698 4 8.05664ZM2.5 3.55664H5.5V2.55664C5.5 2.13997 5.35417 1.78581 5.0625 1.49414C4.77083 1.20247 4.41667 1.05664 4 1.05664C3.58333 1.05664 3.22917 1.20247 2.9375 1.49414C2.64583 1.78581 2.5 2.13997 2.5 2.55664V3.55664Z" fill="#434343"/></svg>`
let waitcard = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 5.18182C2.89543 5.18182 2 6.07726 2 7.18183V8.18182H22V7.18182C22 6.07725 21.1046 5.18182 20 5.18182H4ZM22 10.6818H2V16.8182C2 17.9228 2.89543 18.8182 4 18.8182H20C21.1046 18.8182 22 17.9228 22 16.8182V10.6818ZM3.625 13.1818C3.625 12.9747 3.79289 12.8068 4 12.8068H12C12.2071 12.8068 12.375 12.9747 12.375 13.1818C12.375 13.3889 12.2071 13.5568 12 13.5568H4C3.79289 13.5568 3.625 13.3889 3.625 13.1818ZM4 14.8068C3.79289 14.8068 3.625 14.9747 3.625 15.1818C3.625 15.3889 3.79289 15.5568 4 15.5568H8C8.20711 15.5568 8.375 15.3889 8.375 15.1818C8.375 14.9747 8.20711 14.8068 8 14.8068H4Z" fill="#979797"/></svg>`
let camera = `<svg viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg"><path d="M4.79203 2.09772H4.83575L4.86544 2.06563L6.37742 0.431055H11.29L12.802 2.06563L12.8316 2.09772H12.8754H15.5004C15.932 2.09772 16.299 2.25023 16.6067 2.55802C16.9145 2.8658 17.067 3.23279 17.067 3.66439V13.6644C17.067 14.096 16.9145 14.463 16.6067 14.7708C16.299 15.0785 15.932 15.2311 15.5004 15.2311H2.16703C1.73543 15.2311 1.36845 15.0785 1.06066 14.7708C0.752875 14.463 0.600366 14.096 0.600366 13.6644V3.66439C0.600366 3.23279 0.752875 2.8658 1.06066 2.55802C1.36845 2.25023 1.73543 2.09772 2.16703 2.09772H4.79203ZM2.06703 13.6644V13.7644H2.16703H15.5004H15.6004V13.6644V3.66439V3.56439H15.5004H12.1695L10.6784 1.93032L10.6487 1.89772H10.6045H7.06287H7.01874L6.989 1.93032L5.49791 3.56439H2.16703H2.06703V3.66439V13.6644ZM11.4192 11.2499C10.709 11.9601 9.84915 12.3144 8.8337 12.3144C7.81825 12.3144 6.95836 11.9601 6.24816 11.2499C5.53796 10.5397 5.1837 9.67984 5.1837 8.66439C5.1837 7.64894 5.53796 6.78905 6.24816 6.07885C6.95836 5.36865 7.81825 5.01439 8.8337 5.01439C9.84915 5.01439 10.709 5.36865 11.4192 6.07885C12.1294 6.78905 12.4837 7.64894 12.4837 8.66439C12.4837 9.67984 12.1294 10.5397 11.4192 11.2499ZM7.28382 10.2143C7.70585 10.6363 8.22456 10.8477 8.8337 10.8477C9.44284 10.8477 9.96155 10.6363 10.3836 10.2143C10.8056 9.79223 11.017 9.27353 11.017 8.66439C11.017 8.05525 10.8056 7.53654 10.3836 7.11451C9.96155 6.69248 9.44284 6.48105 8.8337 6.48105C8.22456 6.48105 7.70585 6.69248 7.28382 7.11451C6.86179 7.53654 6.65037 8.05525 6.65037 8.66439C6.65037 9.27353 6.86179 9.79223 7.28382 10.2143Z" stroke="white" stroke-width="0.2"/></svg>`
let addwithcircle = `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M12.7269 7.95376H7.96335V12.7152C7.96335 13.2416 7.53248 13.6663 7.01185 13.6663C6.48522 13.6663 6.06034 13.2357 6.06034 12.7152V7.95376H1.28484C0.75822 7.95376 0.333332 7.52308 0.333332 7.00267C0.333332 6.47627 0.764204 6.05157 1.28484 6.05157H6.04837V1.28411C6.04837 0.757712 6.47924 0.333008 6.99988 0.333008C7.5265 0.333008 7.95139 0.763694 7.95139 1.28411V6.04558H12.7149C13.2415 6.04558 13.6664 6.47627 13.6664 6.99668C13.6784 7.52906 13.2475 7.95376 12.7269 7.95376Z" fill="#006AA8"/></svg>`
let checkboxclicked = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path d="M15.9982 0H2.00179C0.904036 0 0 0.904036 0 2.00179V15.9982C0 17.104 0.904036 18 2.00179 18H15.9982C17.096 18 18 17.104 18 15.9982V2.00179C18 0.904036 17.104 0 15.9982 0ZM7.70852 13.2861C7.32108 13.6735 6.69148 13.6735 6.29596 13.2861L2.70404 9.69417C2.31659 9.30673 2.31659 8.67713 2.70404 8.28161C3.09148 7.89417 3.72108 7.89417 4.11659 8.28161L6.99821 11.1632L13.8834 4.2861C14.2709 3.89865 14.9004 3.89865 15.296 4.2861C15.6834 4.67354 15.6834 5.30314 15.296 5.69865L7.70852 13.2861Z"/></svg>`
let checkboxnotclicked = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path d="M14.9973 15.9982H3.00269C2.45381 15.9982 2.00179 15.5462 2.00179 14.9973V3.00269C2.00179 2.45381 2.45381 2.00179 3.00269 2.00179H15.0054C15.5543 2.00179 16.0063 2.45381 16.0063 3.00269V15.0054C15.9982 15.5462 15.5462 15.9982 14.9973 15.9982ZM15.9982 0H2.00179C0.904036 0 0 0.904036 0 2.00179V15.9982C0 17.104 0.904036 18 2.00179 18H15.9982C17.096 18 18 17.104 18 15.9982V2.00179C18 0.904036 17.104 0 15.9982 0Z"/></svg>`
let defaultTick = `<svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 0.5C3.13901 0.5 0 3.63901 0 7.5C0 11.361 3.13901 14.5 7 14.5C10.861 14.5 14 11.361 14 7.5C14 3.63901 10.861 0.5 7 0.5ZM5.09776 10.4946L2.57399 7.97713C2.29148 7.69462 2.29148 7.24888 2.57399 6.99776C2.8565 6.71525 3.27085 6.71525 3.55336 6.99776L5.56861 9.013L10.3839 4.19776C10.6664 3.91525 11.087 3.91525 11.3632 4.19776C11.6457 4.48027 11.6457 4.9009 11.3632 5.17713L6.04574 10.4946C5.82601 10.7771 5.37399 10.7771 5.09776 10.4946Z" fill="#8DBD00"/></svg>`
type uri = {
  uri: string,
  local: bool,
}

open ReactNative
open Style
@react.component
let make = (
  ~name,
  ~width=20.,
  ~height=16.,
  ~fill="#ffffff",
  ~defaultView: option<React.element>=?,
  ~style=viewStyle(),
) => {
  defaultView->ignore
  let (isLoaded, setIsLoaded) = React.useState(_ => false)
  let (iconName, setIconName) = React.useState(_ => name->String.toLowerCase)

  React.useEffect1(() => {
    setIconName(_ => name->String.toLowerCase)
    None
  }, [name])

  let uri = React.useMemo1(() => {
    let localName = switch iconName {
    | "card" => card
    | "cardv1" => cardv1
    | "close" => close
    | "cvvempty" => cvvempty
    | "cvvfilled" => cvvfilled
    | "error" => error
    | "lock" => lock
    | "waitcard" => waitcard
    | "camera" => camera
    | "addwithcircle" => addwithcircle
    | "checkboxclicked" => checkboxclicked
    | "checkboxnotclicked" => checkboxnotclicked
    | "defaulttick" => defaultTick
    | _ => ""
    }
    localName == ""
      ? {
          uri: assetUrl->String.replace("error", iconName),
          local: false,
        }
      : {uri: localName, local: true}
  }, [iconName])

  <View style={array([viewStyle(~height=height->dp, ~width=width->dp, ()), style])}>
    {uri.local
      ? <ReactNativeSvg.SvgCss
          onError={() => {
            setIsLoaded(_ => true)
            setIconName(_ => "error")
          }}
          onLoad={() => {
            setIsLoaded(_ => true)
          }}
          xml=uri.uri
          width
          height
          fill
        />
      : <ReactNativeSvg.SvgUri
          onError={() => {
            setIsLoaded(_ => true)
            setIconName(_ => "error")
          }}
          onLoad={() => {
            setIsLoaded(_ => true)
          }}
          uri=uri.uri
          width
          height
          fill
        />}
    {isLoaded || uri.local
      ? React.null
      : <ActivityIndicator
          style={viewStyle(~height=height->dp, ~width=width->dp, ())} color=fill
        />}
  </View>
}
